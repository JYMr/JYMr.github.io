webpackJsonp([8],{"3Zq0":function(e,t,a){"use strict";var o=a("AA3o"),n=a.n(o),i=a("xSur"),r=a.n(i),l=a("LJJC"),s=a("++MA"),c=new(function(){function e(){n()(this,e)}return r()(e,[{key:"getProductData",value:function(e){return Object(l.c)("/commodity/supplier/commodity/commoditys",e).then(function(e){return e})}},{key:"getProductDetail",value:function(e){return Object(l.b)("/commodity/supplier/commodity/commodity/"+e).then(function(e){if(4095294432e3==e.soldOutTime&&(e.soldOutTime=null),2===e.type&&e.drugs.length>0){var t=e.drugs.map(function(e){return e.approvalNumber});e.drugs[0].approvalNumber=t.toString()}return 0==e.grouponPrice&&(e.grouponPrice=null),null===e.drugTestUrl&&(e.drugTestUrl={url:""}),0==e.seq&&(e.seq=null),e})}},{key:"commoditysByOpen",value:function(e){return Object(l.d)("/commodity/supplier/commodity/commoditysByOpen",e).then(function(e){return e})}},{key:"commoditysByPause",value:function(e){return Object(l.d)("/commodity/supplier/commodity/commoditysByPause",e).then(function(e){return e})}},{key:"addcommodity",value:function(e){return null==e.soldOutTime&&(e.soldOutTime=4095294432e3),Object(l.c)("/commodity/supplier/commodity/commodity",e).then(function(e){return e})}},{key:"editcommodity",value:function(e){return null==e.soldOutTime&&(e.soldOutTime=4095294432e3),Object(l.d)("/commodity/supplier/commodity/commodity",e).then(function(e){return e})}},{key:"applyByCommodity",value:function(e){return null==e.soldOutTime&&(e.soldOutTime=4095294432e3),Object(l.c)("/commodity/supplier/apply/applyByCommodity",e).then(function(e){return e})}},{key:"commodityByState",value:function(e){return Object(l.d)("/commodity/supplier/commodity/commodityByState",e).then(function(e){return e})}},{key:"uploadmanual",value:function(e,t){return Object(l.c)("/commodity/supplier/drug/leaflet/"+e,t).then(function(e){return e})}},{key:"importExecl",value:function(e){return Object(l.e)("/commodity/import/exportCommodity",{data:e,headers:{token:s.default.prototype.$token},responseType:"arraybuffer",method:"POST"},!1).then(function(e){return e})}}]),e}());t.a=c},"CD+V":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("aA9S"),n=a.n(o),i=a("4YfN"),r=a.n(i),l=a("Jlbz"),s=a.n(l),c=a("3Zq0"),u={props:{tableData:{type:Object,required:!0},type:{type:Number,required:!0}},methods:{commoditysByPause:function(e,t){var a=this;this.$confirm("是否下架该["+t+"]商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){c.a.commodityByState({id:[e],state:2}).then(function(e){a.$message.success("操作成功"),a.$emit("reload")})}).catch(function(){})},commoditysByOpen:function(e,t){var a=this;this.$confirm("是否重新上架该["+t+"]商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){c.a.commodityByState({id:[e],state:1}).then(function(e){a.$message.success("操作成功"),a.$emit("reload")})}).catch(function(){})},paginationChange:function(e){this.$emit("paginationChange",e)},paginationSizeChange:function(e){this.$emit("paginationSizeChange",e)},LinkTo:function(e){this.$router.push({path:e})}},filters:{toFixedPrice:function(e){return e?(e=parseFloat(e)).toFixed(2):""}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"UpShelvestable"},[a("el-table",{attrs:{data:e.tableData.list,border:""}},[a("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.listImageUrl.length>0?a("img",{attrs:{src:t.row.listImageUrl[0].url,alt:""}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"commodityEncoding",label:"商品编码","class-name":"tab_goods"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品信息","class-name":"tab_goods",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.drugs,function(o,n){return a("span",{key:"Num_"+n},[e._v("\n                     "+e._s(2==t.row.type?"商品"+(n+1)+": ":"")+"\n                     "+e._s(o.name)+"\n                     "+e._s(n==t.row.drugs.length-1?"":",")+"\n                     "),e._v(" "),a("i",[e._v("规格: "+e._s(o.specification))])])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"厂家","class-name":"tab_goods",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.drugs,function(o,n){return a("span",{key:"Num_"+n},[e._v("\n                     "+e._s(2==t.row.type?"商品"+(n+1)+": ":"")+"\n                     "+e._s(o.manufacturers)+"\n                     "+e._s(n==t.row.drugs.length-1?"":",")+"\n                     "),a("i",[e._v(e._s(o.approvalNumber))])])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"上架商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"businessArea",label:"销售范围"}}),e._v(" "),a("el-table-column",{attrs:{label:"价格","class-name":"tab_goods",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("原价: ￥"+e._s(e._f("toFixedPrice")(t.row.originalPrice)))]),e._v(" "),a("span",[e._v("单体: ￥"+e._s(e._f("toFixedPrice")(t.row.individualPurchasePrice)))]),e._v(" "),a("span",[e._v("连锁: ￥"+e._s(e._f("toFixedPrice")(t.row.grouponPrice)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"库存/起订量","class-name":"tab_goods"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("数量: "+e._s(t.row.repertory))]),e._v(" "),a("span",[e._v("起订量: "+e._s(t.row.minNumber))])]}}])}),e._v(" "),4==e.type?a("el-table-column",{attrs:{label:"审核状态/时间","class-name":"tab_goods"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.applyVo?[0==t.row.useState?a("div",[e._v("未审核")]):e._e(),e._v(" "),1==t.row.useState?a("div",[e._v("审核通过")]):e._e(),e._v(" "),2==t.row.useState?a("div",[e._v("审核失败")]):e._e(),e._v(" "),t.row.applyVo?a("div",[e._v(e._s(e._f("formatDate")(t.row.applyVo.applyTime)))]):e._e()]:void 0}}])}):e._e(),e._v(" "),4==e.type?a("el-table-column",{attrs:{label:"原因"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.applyVo?[e._v("\n                 "+e._s(t.row.applyVo.result)+"\n             ")]:void 0}}])}):e._e(),e._v(" "),1==e.type?a("el-table-column",{attrs:{label:"操作",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"mini"},on:{click:function(a){e.LinkTo("/Product/UpShelves/AddProduct?open=1&id="+t.row.id)}}},[e._v("\n                     立即上架\n                     "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{on:{click:function(a){e.LinkTo("/Product/UpShelves/AddProduct?id="+t.row.id)}}},[e._v("编辑")])]),e._v(" "),a("el-dropdown-item",[a("div",{on:{click:function(a){e.commoditysByPause(t.row.id,t.row.commodityEncoding)}}},[e._v("下架")])])],1)],1)]}}])}):e._e(),e._v(" "),2==e.type?a("el-table-column",{attrs:{label:"操作",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"mini"},on:{click:function(a){e.commoditysByPause(t.row.id,t.row.commodityEncoding)}}},[e._v("\n                     下架\n                     "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("span",{on:{click:function(a){e.LinkTo("/Product/UpShelves/AddProduct?id="+t.row.id)}}},[e._v("编辑")])]),e._v(" "),a("el-dropdown-item",[a("span",{on:{click:function(a){e.LinkTo("/Product/UpShelves/ProductOrderList?commodityId="+t.row.id)}}},[e._v("采购明细")])])],1)],1)]}}])}):e._e(),e._v(" "),3==e.type?a("el-table-column",{attrs:{label:"操作",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"mini"},on:{click:function(a){e.commoditysByOpen(t.row.id,t.row.commodityEncoding)}}},[e._v("\n                     重新上架\n                     "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{on:{click:function(a){e.LinkTo("/Product/UpShelves/AddProduct?id="+t.row.id)}}},[e._v("编辑")])])],1)],1)]}}])}):e._e(),e._v(" "),4==e.type?a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"}},[a("div",{on:{click:function(a){e.LinkTo("/Product/UpShelves/AddProduct?open=2&id="+t.row.id)}}},[e._v("修改后重新提交")])])]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"table-pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next",total:Number(e.tableData.total),"current-page":e.tableData.pageNum,"page-sizes":[10,20,30,50,100],"prev-text":"上一页","next-text":"下一页"},on:{"current-change":e.paginationChange,"size-change":e.paginationSizeChange}})],1)],1)},staticRenderFns:[]};var p=a("vSla")(u,d,!1,function(e){a("wJZl")},null,null).exports,m=a("5VHC"),h=a("HzJ8"),f=a.n(h),y=a("xCLT"),g={model:{prop:"categoryId",event:"categoryChoose"},props:{categoryId:{required:!0,type:String,default:""},default:{type:String,default:""}},data:function(){return{categoryArr:[],categorydata:[],props:{label:"name",value:"id",children:"children"}}},mounted:function(){this.getCategory()},methods:{getCategory:function(e){var t=this;y.a.getChildCategory("0").then(function(a){t.categorydata=a,e&&e()})},getCategoryChild:function(e,t){var a=1===e.length?e[0]:e[1],o=this.categorydata,n=!0;if(1!==e.length){var i=!0,r=!1,l=void 0;try{for(var s,c=f()(o);!(i=(s=c.next()).done);i=!0){var u=s.value;if(u.id===e[0]){o=u.children;break}}}catch(e){r=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(r)throw l}}n=!1}y.a.getChildCategory(a,n).then(function(e){var n=!0,i=!1,r=void 0;try{for(var l,s=f()(o);!(n=(l=s.next()).done);n=!0){var c=l.value;c.id===a&&(c.children=e)}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}t&&t()})},handleItemChange:function(e){this.getCategoryChild(e)},handleChange:function(e){if(3===e.length){var t=e[2];this.$emit("categoryChoose",t)}}},watch:{default:{immediate:!0,handler:function(e,t){var a=this;if(""!==e&&void 0!==e){var o=e.split(",");3==o.length&&this.getCategoryChild([o[0]],function(){a.getCategoryChild([o[0],o[1]])})}}}}},v={render:function(){var e=this.$createElement;return(this._self._c||e)("el-cascader",{attrs:{value:this.categoryArr,options:this.categorydata,props:this.props},on:{"active-item-change":this.handleItemChange,change:this.handleChange}})},staticRenderFns:[]};var b=a("vSla")(g,v,!1,function(e){a("a99y")},null,null).exports,_={data:function(){return{isMoreShow:!1,loadingTab:!1,tableData:{list:[]},mode:0,searchform:{},pageVo:{pageNo:1,size:10}}},mounted:function(){this.getTableData(this.mode)},methods:{commoditysByOpen:function(){var e=this;this.$confirm("是否批量上架所有商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){c.a.commoditysByOpen({supplierId:e.$supplierId,supplyId:e.$supplyId}).then(function(t){e.$message.success("操作成功"),e.getTableData()})}).catch(function(){})},commoditysByPause:function(){var e=this;this.$confirm("是否批量下架所有商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){c.a.commoditysByPause({supplierId:e.$supplierId,supplyId:e.$supplyId}).then(function(t){e.$message.success("操作成功"),e.getTableData()})}).catch(function(){})},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mode;this.loadingTab=!0;var a=this.searchform,o=r()({},a,{pageVo:this.pageVo});switch(t){case 0:o=n()(o,{state:0});break;case 1:o=n()(o,{state:1});break;case 2:o=n()(o,{state:2,useState:1});break;case 3:o=n()(o,{state:2,useState:2})}c.a.getProductData(o).then(function(t){e.tableData=t,e.loadingTab=!1})},downLoadExcel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mode,t=n()(this.searchform,{pageVo:this.pageVo});switch(e){case 0:t=n()(t,{state:0});break;case 1:t=n()(t,{state:1});break;case 2:t=n()(t,{state:2,useState:1});break;case 3:t=n()(t,{state:2,useState:2})}c.a.importExecl(t).then(function(e){var t=new Blob([e],{type:"application/vnd.ms-excel;charset=utf-8"}),a=URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.download="商品品数据导出"+(new Date).getTime()+".xlsx",o.click()})},searchData:function(){this.getTableData()},paginationChange:function(e){this.pageVo.pageNo=parseInt(e),this.getTableData()},paginationSizeChange:function(e){this.pageVo={pageNo:1,size:parseInt(e)},this.getTableData(this.mode)},toggleTab:function(e){this.pageVo={pageNo:1,size:10};var t=parseInt(e.index);this.mode=t,this.getTableData(t)},moreForm:function(){this.isMoreShow=!this.isMoreShow},LinkTo:function(e){this.$router.push({path:e})}},components:{"el-collapse-transition":s.a,UpShelvesTable:p,SelectInput:m.a,CategorySelect:b}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("AutoBreadcrumb"),e._v(" "),a("div",{staticClass:"UpShelves content-box"},[a("el-form",{ref:"form",attrs:{model:e.searchform,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{lg:6}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("SelectInput",{attrs:{selectList:[{label:"商品编号",key:"numberEncoding"},{label:"商品名称",key:"name"},{label:"厂家名称",key:"manufacturers"},{label:"批准文号",key:"approvalNumber"}]},model:{value:e.searchform,callback:function(t){e.searchform=t},expression:"searchform"}})],1)],1),e._v(" "),a("el-col",{attrs:{lg:10}},[a("el-form-item",{attrs:{label:"上架时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp"},model:{value:e.searchform.putawayStartTime,callback:function(t){e.$set(e.searchform,"putawayStartTime",t)},expression:"searchform.putawayStartTime"}})],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:1}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","default-time":"23:59:59","value-format":"timestamp"},model:{value:e.searchform.putawayEndTime,callback:function(t){e.$set(e.searchform,"putawayEndTime",t)},expression:"searchform.putawayEndTime"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{lg:1}},[a("span",{staticClass:"search-more"},[a("i",{class:[e.isMoreShow?"el-icon-arrow-up":"el-icon-arrow-down"],on:{click:e.moreForm}})])]),e._v(" "),a("el-col",{attrs:{md:6}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.searchData}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"default"},on:{click:function(t){e.downLoadExcel(e.mode)}}},[e._v("导出")])],1)],1)],1),e._v(" "),a("el-collapse-transition",[e.isMoreShow?a("el-row",[a("el-col",{attrs:{lg:6}},[a("el-form-item",{attrs:{label:"供货对象"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:e.searchform.supply,callback:function(t){e.$set(e.searchform,"supply",t)},expression:"searchform.supply"}},[a("el-option",{attrs:{label:"零售单体+第三终端",value:"零售单体+第三终端"}}),e._v(" "),a("el-option",{attrs:{label:"零售单体+第三终端+连锁总部",value:"零售单体+第三终端+连锁总部"}}),e._v(" "),a("el-option",{attrs:{label:"第三终端",value:"第三终端"}}),e._v(" "),a("el-option",{attrs:{label:"零售单体",value:"零售单体"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{lg:6}},[a("el-form-item",{attrs:{label:"商品类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchform.type,callback:function(t){e.$set(e.searchform,"type",t)},expression:"searchform.type"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"单品销售",value:1}}),e._v(" "),a("el-option",{attrs:{label:"套餐销售",value:2}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{lg:6}},[a("el-form-item",{attrs:{label:"商品分类"}},[a("CategorySelect",{model:{value:e.searchform.categoryId,callback:function(t){e.$set(e.searchform,"categoryId",t)},expression:"searchform.categoryId"}})],1)],1)],1):e._e()],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{lg:24}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.LinkTo("/Product/UpShelves/AddProduct")}}},[e._v("新增上架")]),e._v(" "),a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"small"}},[e._v("\n                   批量操作\n                   "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"cell",on:{click:e.commoditysByOpen}},[e._v("\n                               批量上架所有商品\n                           ")])]),e._v(" "),a("el-dropdown-item",[a("div",{staticClass:"cell",on:{click:e.commoditysByPause}},[e._v("\n                               批量下架所有商品\n                           ")])])],1)],1)],1)],1),e._v(" "),a("el-tabs",{attrs:{type:"card",value:"first"},on:{"tab-click":e.toggleTab}},[a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTab,expression:"loadingTab"}],attrs:{label:"待上架",name:"first"}},[a("UpShelvesTable",{attrs:{tableData:e.tableData,type:1},on:{paginationChange:e.paginationChange,paginationSizeChange:e.paginationSizeChange,reload:e.getTableData}})],1),e._v(" "),a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTab,expression:"loadingTab"}],attrs:{label:"已上架",name:"second",lazy:!0}},[a("UpShelvesTable",{attrs:{tableData:e.tableData,type:2},on:{paginationChange:e.paginationChange,paginationSizeChange:e.paginationSizeChange,reload:e.getTableData}})],1),e._v(" "),a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTab,expression:"loadingTab"}],attrs:{label:"已下架",name:"third",lazy:!0}},[a("UpShelvesTable",{attrs:{tableData:e.tableData,type:3},on:{paginationChange:e.paginationChange,paginationSizeChange:e.paginationSizeChange,reload:e.getTableData}})],1),e._v(" "),a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTab,expression:"loadingTab"}],attrs:{label:"审核不通过",name:"four",lazy:!0}},[a("UpShelvesTable",{attrs:{tableData:e.tableData,type:4},on:{paginationChange:e.paginationChange,paginationSizeChange:e.paginationSizeChange,reload:e.getTableData}})],1)],1)],1)],1)},staticRenderFns:[]};var k=a("vSla")(_,w,!1,function(e){a("XMnz")},null,null);t.default=k.exports},XMnz:function(e,t){},a99y:function(e,t){},wJZl:function(e,t){}});