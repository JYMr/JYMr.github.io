webpackJsonp([26],{sBmz:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("4YfN"),s=t.n(i),l=t("T+zv"),a=t("zuY+"),d=t("w3CS"),o={props:{visible:{type:Boolean,required:!0},addressid:{type:String,value:""}},data:function(){return{dialogVisible:!1,addressform:{deliveryProvince:"",deliveryCity:"",deliveryArea:"",deliveryDefault:0},area:{Province:[],City:[],Area:[]},validator:d.a}},methods:{init:function(){var e=this;setTimeout(function(){e.addressform={deliveryProvince:"",deliveryCity:"",deliveryArea:"",deliveryDefault:0},e.$refs.form.resetFields(),e.getProvince(),""!==e.addressid&&e.getAddress(e.addressid)},0)},getAddress:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;l.a.getSupplierDeliveryById(r).then(function(r){e.addressform=r,e.getRegionListByPid(r.deliveryProvince,"area","City"),e.getRegionListByPid(r.deliveryCity,"area","Area")})},saveAddress:function(){var e=this;this.$refs.form.validate(function(r){r&&l.a.addSupplierDelivery(e.addressform).then(function(r){e.$message.success("保存成功"),e.dialogVisible=!1,e.$emit("saveEvent")})})},getProvince:function(){var e=this;a.a.getprovince().then(function(r){e.area.Province=r})},getRegionListByPid:function(e,r,t){var i=this;a.a.getRegionListByPid(e).then(function(e){i[r][t]=e})},handleChange:function(e,r,t,i){"City"==t?(this.addressform[e+"City"]="",this.addressform[e+"Area"]=""):"Area"==t&&(this.addressform[e+"Area"]=""),this.getRegionListByPid(i,r,t)}},watch:{visible:function(e,r){this.dialogVisible=e},dialogVisible:function(e,r){e||this.$emit("update:visible",e)}}},n={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-dialog",{attrs:{title:"新增收货地址",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(r){e.dialogVisible=r},open:e.init}},[t("el-form",{ref:"form",attrs:{model:e.addressform,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"收货人姓名",prop:"deliveryName",rules:[{required:!0,message:"请输入收货人姓名",trigger:"blur"}]}},[t("el-col",{attrs:{span:10}},[t("el-input",{model:{value:e.addressform.deliveryName,callback:function(r){e.$set(e.addressform,"deliveryName",r)},expression:"addressform.deliveryName"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"配送区域",prop:"deliveryArea",rules:[{required:!0,message:"请选择完整的配送区域",trigger:"blur"}]}},[t("el-col",{attrs:{span:4}},[t("el-select",{on:{change:function(r){for(var t=arguments.length,i=Array(t);t--;)i[t]=arguments[t];e.handleChange.apply(void 0,["delivery","area","City"].concat(i))}},model:{value:e.addressform.deliveryProvince,callback:function(r){e.$set(e.addressform,"deliveryProvince",r)},expression:"addressform.deliveryProvince"}},e._l(e.area.Province,function(e){return t("el-option",{key:e.regionId,attrs:{label:e.regionName,value:e.regionId}})}))],1),e._v(" "),t("el-col",{attrs:{span:4,offset:1}},[t("el-select",{on:{change:function(r){for(var t=arguments.length,i=Array(t);t--;)i[t]=arguments[t];e.handleChange.apply(void 0,["delivery","area","Area"].concat(i))}},model:{value:e.addressform.deliveryCity,callback:function(r){e.$set(e.addressform,"deliveryCity",r)},expression:"addressform.deliveryCity"}},e._l(e.area.City,function(e){return t("el-option",{key:e.regionId,attrs:{label:e.regionName,value:e.regionId}})}))],1),e._v(" "),t("el-col",{attrs:{span:4,offset:1}},[t("el-select",{model:{value:e.addressform.deliveryArea,callback:function(r){e.$set(e.addressform,"deliveryArea",r)},expression:"addressform.deliveryArea"}},e._l(e.area.Area,function(e){return t("el-option",{key:e.regionId,attrs:{label:e.regionName,value:e.regionId}})}))],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"详细地址",prop:"deliveryAddress",rules:[{required:!0,message:"请输入详细地址",trigger:"blur"}]}},[t("el-col",{attrs:{span:10}},[t("el-input",{model:{value:e.addressform.deliveryAddress,callback:function(r){e.$set(e.addressform,"deliveryAddress",r)},expression:"addressform.deliveryAddress"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"联系电话",prop:"deliveryPhone",rules:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:e.validator.phone,trigger:"blur"}]}},[t("el-col",{attrs:{span:10}},[t("el-input",{model:{value:e.addressform.deliveryPhone,callback:function(r){e.$set(e.addressform,"deliveryPhone",r)},expression:"addressform.deliveryPhone"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"邮政编码",prop:"deliveryPostcode",rules:[{validator:e.validator.postalcode,trigger:"blur"}]}},[t("el-col",{attrs:{span:10}},[t("el-input",{model:{value:e.addressform.deliveryPostcode,callback:function(r){e.$set(e.addressform,"deliveryPostcode",r)},expression:"addressform.deliveryPostcode"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"是否默认"}},[t("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.addressform.deliveryDefault,callback:function(r){e.$set(e.addressform,"deliveryDefault",r)},expression:"addressform.deliveryDefault"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(r){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveAddress}},[e._v("确 定")])],1)],1)},staticRenderFns:[]},c={data:function(){return{visible:!1,loading:!1,addressid:"",addressList:[]}},mounted:function(){this.getAddressList()},methods:{getAddressList:function(){var e=this;this.loading=!0,l.a.getSupplierDelivery().then(function(r){e.loading=!1,e.addressList=r})},addAddress:function(){this.showDialog()},editAddress:function(e){this.showDialog(e)},delAddress:function(e){var r=this;this.$confirm("是否确认删除该地址?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.deleteSupplierDeliveryById(e).then(function(e){r.$message.success("删除成功"),r.getAddressList()})}).catch(function(){})},setDefault:function(e){var r=this;this.$confirm("是否设置该地址为默认值?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.addSupplierDelivery(s()({},e,{deliveryDefault:1})).then(function(e){r.$message.success("修改成功"),r.getAddressList()})}).catch(function(){})},showDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.addressid=e,this.visible=!0}},components:{AddressEditor:t("vSla")(o,n,!1,null,null,null).exports}},v={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("AutoBreadcrumb"),e._v(" "),t("div",{staticClass:"Address content-box"},[t("el-row",[t("el-col",{attrs:{lg:24}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addAddress}},[e._v("新增收货地址")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.addressList,border:""}},[t("el-table-column",{attrs:{prop:"deliveryName",label:"收货人"}}),e._v(" "),t("el-table-column",{attrs:{prop:"",label:"是否默认"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949",disabled:""},model:{value:r.row.deliveryDefault,callback:function(t){e.$set(r.row,"deliveryDefault",t)},expression:"scope.row.deliveryDefault"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"收货地址"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v("\n                    "+e._s(r.row.procityarea)+e._s(r.row.deliveryAddress)+"\n                ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"deliveryPhone",label:"联系电话"}}),e._v(" "),t("el-table-column",{attrs:{prop:"deliveryPostcode",label:"邮编"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"mini"},on:{click:function(t){e.editAddress(r.row.deliveryId)}}},[e._v("\n                        修改\n                        "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("div",{on:{click:function(t){e.setDefault(r.row)}}},[e._v("设置默认地址")])]),e._v(" "),t("el-dropdown-item",[t("div",{on:{click:function(t){e.delAddress(r.row.deliveryId)}}},[e._v("删除")])])],1)],1)]}}])})],1)],1),e._v(" "),t("AddressEditor",{attrs:{visible:e.visible,addressid:e.addressid},on:{"update:visible":function(r){e.visible=r},saveEvent:e.getAddressList}})],1)},staticRenderFns:[]},u=t("vSla")(c,v,!1,null,null,null);r.default=u.exports}});